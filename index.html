<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Muzamil Printing</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
        .card { background: white; padding: 2.5rem 2rem; border-radius: 24px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; border-top: 8px solid #007bff; transition: all 0.3s ease; }
        
        .profile-img { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid #007bff; padding: 3px; background: white; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,123,255,0.2); }
        
        h1 { margin: 0; color: #007bff; font-size: 22px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; }
        h2 { margin: 5px 0 25px; color: #666; font-size: 14px; font-weight: 500; }

        .urdu-label { font-family: 'Noto Nastaliq Urdu', serif; color: #333; font-size: 22px; margin-bottom: 10px; display: block; line-height: 2.5; }

        .clean-input { width: 100%; padding: 14px; background: #f8f9fa; border: 2px solid #dee2e6; border-radius: 12px; text-align: center; font-size: 18px; margin-bottom: 15px; box-sizing: border-box; font-weight: bold; outline: none; }
        
        .toggle-link { color: #007bff; text-decoration: none; font-size: 13px; font-weight: 600; cursor: pointer; margin-bottom: 15px; display: inline-block; }
        
        #advancedPanel { display: none; background: #f1f3f5; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #dee2e6; }

        .file-btn { background: #f8faff; color: #007bff; border: 2px dashed #007bff; padding: 16px; border-radius: 12px; cursor: pointer; margin-bottom: 25px; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: 600; }

        .upload-btn { background: #007bff; color: white; border: none; padding: 16px; border-radius: 12px; font-size: 17px; font-weight: 700; width: 100%; cursor: pointer; box-shadow: 0 4px 15px rgba(0,123,255,0.3); }

        #progress-container { width: 100%; background-color: #e9ecef; border-radius: 10px; display: none; margin-top: 20px; overflow: hidden; height: 20px; }
        #progress-bar { width: 0%; height: 100%; background-color: #28a745; text-align: center; color: white; line-height: 20px; font-weight: bold; font-size: 12px; transition: width 0.1s; }

        #success-screen { display: none; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .check-mark { font-size: 55px; color: #28a745; margin: 10px 0; }
        .success-title { color: #28a745; font-size: 24px; font-weight: 700; margin-bottom: 8px; }
    </style>
</head>
<body>
    <div class="card" id="main-card">
        <div id="upload-content">
            <img src="static/muzamil.jpg" class="profile-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
            <h1>MUZAMIL PRINTING</h1>
            <h2>Fast & Reliable Service</h2>
            
            <form id="printForm">
                <label class="urdu-label">⁄©ÿ™ŸÜ€å ⁄©ÿßŸæ€åÿß⁄∫ ⁄Üÿß€Å€å€íÿü</label>
                <input type="number" name="copies" id="copies" class="clean-input" value="1" min="1" required>

                <div onclick="toggleAdvanced()" class="toggle-link" id="toggleBtn">Advanced Options (Pages) ‚ñº</div>
                <div id="advancedPanel">
                    <div style="display:flex; justify-content:center; gap:10px;">
                        <input type="number" name="p_start" class="clean-input" style="width:75px; padding:10px;" placeholder="From">
                        <input type="number" name="p_end" class="clean-input" style="width:75px; padding:10px;" placeholder="To">
                    </div>
                </div>

                <div class="file-btn" onclick="document.getElementById('fileInput').click()">
                    <span id="fileName">üìÇ Tap to select file...</span>
                    <input type="file" name="file" id="fileInput" hidden required onchange="updateName()">
                </div>

                <button type="submit" class="upload-btn" id="submitBtn">START PRINTING üñ®Ô∏è</button>

                <div id="progress-container">
                    <div id="progress-bar">0%</div>
                </div>
            </form>
        </div>

        <div id="success-screen">
            <img src="static/muzamil.jpg" class="profile-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
            <div class="check-mark">‚úÖ</div>
            <div class="success-title">Success!</div>
            <p style="color: #444; font-size: 16px;"><b>Muzamil is printing</b> your file right now. <br>Please collect it from the counter.</p>
            <button onclick="location.reload()" class="upload-btn" style="margin-top:25px; background:#6c757d; box-shadow: none;">Print Another File</button>
        </div>
    </div>

    <script>
        function updateName() {
            const input = document.getElementById('fileInput');
            if(input.files.length > 0) {
                document.getElementById('fileName').innerHTML = input.files[0].name;
                document.getElementById('fileName').style.color = "#28a745";
            }
        }

        function toggleAdvanced() {
            const panel = document.getElementById('advancedPanel');
            const btn = document.getElementById('toggleBtn');
            const isVisible = panel.style.display === "block";
            panel.style.display = isVisible ? "none" : "block";
            btn.innerHTML = isVisible ? "Advanced Options (Pages) ‚ñº" : "Hide Advanced Options ‚ñ≤";
        }

        document.getElementById('printForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const bar = document.getElementById('progress-bar');
            const container = document.getElementById('progress-container');
            
            container.style.display = "block";
            btn.disabled = true;
            btn.innerHTML = "Processing...";

            let width = 0;
            let id = setInterval(() => {
                if (width >= 92) clearInterval(id);
                else { width++; bar.style.width = width + "%"; bar.innerHTML = width + "%"; }
            }, 40);

            const formData = new FormData(e.target);
            try {
                // THE NEW SECURE PERMANENT LINK
                await fetch("https://widely-personality-sentence-near.trycloudflare.com", { 
                    method: "POST", 
                    body: formData 
                });
                
                document.getElementById('upload-content').style.display = "none";
                document.getElementById('success-screen').style.display = "block";
                document.getElementById('main-card').style.borderTop = "8px solid #28a745";
            } catch (err) {
                alert("Connection Error! Restart your .bat file on the shop laptop.");
                btn.disabled = false;
                btn.innerHTML = "START PRINTING üñ®Ô∏è";
                container.style.display = "none";
            }
        };
    </script>
</body>
</html>
